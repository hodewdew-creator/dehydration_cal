<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>ìˆ˜ì•¡ì†ë„ ê³„ì‚°ê¸° (Cats)</title>
  <meta name="description" content="ê³ ì–‘ì´ íƒˆìˆ˜/ìœ ì§€/ì§€ì†ì†ì‹¤ ê¸°ë°˜ ì£¼ì…ì†ë„ ê³„ì‚°">
  <style>
    :root{
      --blue:#1d4ed8; --muted:#64748b; --bg:#f8fafc; --card:#fff; --border:#e5e7eb;
    }
    *{box-sizing:border-box}
    body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:var(--bg);color:#0f172a;padding:12px}
    h2{margin:0 0 12px;font-size:1.32rem;color:#1d4ed8;text-align:center}
    h3{margin:0 0 8px;font-size:1.06rem;color:#1d4ed8;display:flex;align-items:center;gap:12px}
    .card{background:#fff;border:1px solid var(--border);border-radius:12px;padding:12px;margin-bottom:12px;box-shadow:0 2px 6px rgba(0,0,0,.04)}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .ibox{border:2px solid var(--blue);border-radius:10px;padding:10px;background:#f9fafb;min-width:140px;flex:1}
    .ibox label{display:block;font-size:.92rem;margin-bottom:4px;color:var(--blue)}
    .ibox input[type=number], .ibox select{width:100%;padding:10px;font-size:1rem;border:1px solid var(--border);border-radius:8px;background:#fff}
    .ibox input:focus, .ibox select:focus{outline:none;border-color:var(--blue)}
    .hint{font-size:.8rem;color:var(--muted)}
    .note{font-size:.8rem;color:#6b7280;margin-top:6px}
    .pillbar{display:flex;gap:8px;flex-wrap:wrap}
    .pill{padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:#fff;cursor:pointer}
    .pill.active{background:var(--blue);color:#fff;border-color:var(--blue)}
    .slider-wrap{display:flex;align-items:center;gap:10px}
    input[type=range]{width:100%}
    .big{font-weight:700;color:var(--blue)}
    .small{font-size:.82rem;color:var(--muted)}
    .split{height:1px;background:var(--border);margin:12px 0}
  </style>
</head>
<body>
  <h2>ìˆ˜ì•¡ì†ë„ ê³„ì‚°ê¸°</h2>

  <!-- 1) í™˜ì & ì²´ì¤‘ -->
  <div class="card">
    <h3>ğŸ¾ ì²´ì¤‘</h3>
    <div class="row">
      <div class="ibox" style="max-width:220px">
        <label for="bw">ì²´ì¤‘ (kg)</label>
        <input id="bw" type="number" step="0.1" placeholder="ì²´ì¤‘ (í•„ìˆ˜ ì…ë ¥)" onfocus="this.placeholder=''" onblur="if(this.value==''){this.placeholder='ì²´ì¤‘ (í•„ìˆ˜ ì…ë ¥)'}">
      </div>
    </div>
  </div>

  <!-- 2) íƒˆìˆ˜ (ì„ íƒì…ë ¥) -->
  <div class="card">
    <h3>ğŸ’§ íƒˆìˆ˜ <span class="small">(ì„ íƒì…ë ¥)</span>
      <label style="display:flex;align-items:center;gap:6px;font-weight:normal;font-size:.9rem">
        <input id="noDehy" type="checkbox" checked>
        <span>íƒˆìˆ˜ ì—†ìŒ</span>
      </label>
    </h3>
    <div class="row">
      <div class="ibox" style="min-width:240px">
        <label>% íƒˆìˆ˜ (5~12%)</label>
        <div class="slider-wrap">
          <input id="dehy" type="range" min="5" max="12" step="0.5" value="7">
          <span id="dehyLab" class="big">7%</span>
        </div>
        <div class="hint">ê²°í•ëŸ‰ = ì²´ì¤‘ Ã— (%/100) Ã— 1000</div>
      </div>
      <div class="ibox" style="min-width:260px">
        <label>ë³´ì¶© ì‹œê°„</label>
        <div class="pillbar" id="rtBtns">
          <div class="pill" data-h="6">6 h</div>
          <div class="pill active" data-h="12">12 h</div>
          <div class="pill" data-h="18">18 h</div>
          <div class="pill" data-h="24">24 h</div>
        </div>
        <div class="hint">ë²„íŠ¼ íƒ­ìœ¼ë¡œ ë³´ì¶©ì‹œê°„ ì„ íƒ</div>
      </div>
    </div>
    <div class="split"></div>
    <div class="row">
      <div class="ibox">
        <label>ê²°í•ëŸ‰ (mL)</label>
        <div id="deficit" class="big">-</div>
      </div>
      <div class="ibox">
        <label>ì‹œê°„ë‹¹ ê²°í• ë³´ì¶©ì†ë„ (mL/h)</label>
        <div id="deficitHr" class="big">-</div>
      </div>
    </div>

    <!-- íƒˆìˆ˜ìœ¨ ê°€ì´ë“œ: ê¸°ë³¸ ë‹«í˜ -->
    <details style="margin-top:10px">
      <summary style="cursor:pointer;color:#374151;font-weight:400;font-size:0.9rem">
        â–¶ ì‹ ì²´ê²€ì‚¬ ìƒ ì¶”ì • íƒˆìˆ˜ìœ¨ ê°€ì´ë“œ (ì—´ê¸°)
      </summary>
      <div class="note" style="margin-top:8px">
        <ul style="margin:6px 0 0 18px">
          <li><strong>&lt;5%</strong> â€” <strong>ì„ìƒì ìœ¼ë¡œ ê°ì§€ ì–´ë ¤ì›€</strong></li>
          <li><strong>5~6%</strong> â€” í”¼ë¶€ ê¸´ì¥ë„ <strong>ì•½ê°„ ë³€í™”</strong></li>
          <li><strong>6~8%</strong> â€” í”¼ë¶€ ê¸´ì¥ë„ ê²½ë¯¸í•˜ê²Œ ê°ì†Œ, <strong>ì ë§‰ ê±´ì¡°</strong></li>
          <li><strong>8~10%</strong> â€” í”¼ë¶€ ê¸´ì¥ë„ <strong>ëª…í™•íˆ ê°ì†Œ</strong>, <strong>ì•ˆêµ¬ í•¨ëª°</strong></li>
          <li><strong>10~12%</strong> â€” í”¼ë¶€ íƒ„ë ¥ <strong>ê±°ì˜ ì†Œì‹¤</strong>ë¡œ <strong>ì§€ì†ì  í…íŒ…</strong>, <strong>ê°ë§‰ í˜¼íƒ</strong>, <strong>ì €í˜ˆëŸ‰ì¦ ì†Œê²¬</strong></li>
          <li><strong>&gt;12%</strong> â€” <strong>ì €í˜ˆëŸ‰ì„± ì‡¼í¬</strong>, <strong>ìƒëª… ìœ„í˜‘</strong> ê°€ëŠ¥</li>
        </ul>
        <div style="margin-top:8px">
          <em>ì°¸ê³ :</em> ì„ìƒ ì†Œê²¬ê³¼ ì‹¤ì œ íƒˆìˆ˜ìœ¨ì˜ ìƒê´€ì—ëŠ” ê°œì¸ì°¨ê°€ ì»¤ì„œ ì´ í‘œëŠ” <strong>ì¶”ì •ì¹˜</strong>ì…ë‹ˆë‹¤.
        </div>
      </div>
    </details>

  </div>

  <!-- 3) ìœ ì§€ìˆ˜ì•¡ (ê³ ì •ê³µì‹) -->
  <div class="card">
    <h3>ğŸ” ìœ ì§€ìˆ˜ì•¡</h3>
    <div class="hint" style="margin-bottom:6px"> Maint(ml/h) = (80 Ã— kg^0.75) / 24</div>
    <div class="row">
      <div class="ibox">
        <label>ìœ ì§€ì†ë„ (mL/h)</label>
        <div id="maint" class="big">-</div>
      </div>
    </div>
  </div>

  <!-- 4) ì§€ì†ì†ì‹¤ (ì„ íƒì…ë ¥) -->
  <div class="card">
    <h3>â• ì§€ì† ì†ì‹¤ <span class="small">(ì„ íƒì…ë ¥, mL/h)</span></h3>
    <div class="row">
      <div class="ibox" style="max-width:220px">
        <label for="ongoing">ì§€ì†ì†ì‹¤ (mL/h)</label>
        <input id="ongoing" type="number" step="1" placeholder="ì—†ìœ¼ë©´ ë¹„ì›Œë‘ê¸°" value="0">
      </div>
    </div>
  </div>

  <!-- 5) ê²°ê³¼ -->
  <div class="card">
    <h3>ğŸš€ ì£¼ì…ì†ë„ ê²°ê³¼</h3>
    <div class="row">
      <div class="ibox">
        <label>ì´ˆê¸° ì†ë„ (mL/h)</label>
        <div id="rateInit" class="big">-</div>
      </div>
      <div class="ibox">
        <label>ë³´ì¶© ì¢…ë£Œ í›„ (mL/h)</label>
        <div id="rateAfter" class="big">-</div>
      </div>
    </div>
    <div class="note">í‘œì‹œ: ì´ˆê¸°ì†ë„(ë³´ì¶©ê¸°ê°„) â†’ ì¢…ë£Œ í›„ ìœ ì§€/ì§€ì†ì†ì‹¤ í¬í•¨ ì†ë„</div>
  </div>

<script>
  const $ = (id)=>document.getElementById(id);
  const fmt = (x,d=0)=> (isNaN(x)? '-' : Number(x).toFixed(d));

  const bw=$('bw'), dehy=$('dehy'), dehyLab=$('dehyLab'), noDehy=$('noDehy');
  const rtBtns=$('rtBtns');
  const deficit=$('deficit'), deficitHr=$('deficitHr');
  const maint=$('maint'), ongoing=$('ongoing');
  const rateInit=$('rateInit'), rateAfter=$('rateAfter');

  let replH = 12;
  rtBtns.querySelectorAll('.pill').forEach(p=>{
    p.addEventListener('click',()=>{
      rtBtns.querySelectorAll('.pill').forEach(x=>x.classList.remove('active'));
      p.classList.add('active');
      replH = parseInt(p.dataset.h,10);
      recalcAll();
    });
  });

  function calcMaint(BW){
    return (80 * Math.pow(BW,0.75)) / 24; // mL/h
  }

  function recalcAll(){
    const BW = parseFloat(bw.value);
    if(isNaN(BW) || BW<=0){
      [maint,deficit,deficitHr,rateInit,rateAfter].forEach(el=>el.textContent='-');
      return;
    }

    let deficitMl=0, deficitPerHr=0;
    if(!noDehy.checked){
      dehyLab.textContent = `${dehy.value}%`;
      deficitMl = BW * (parseFloat(dehy.value)/100) * 1000;
      deficitPerHr = deficitMl / replH;
    } else {
      dehyLab.textContent = '0%';
    }

    deficit.textContent = fmt(deficitMl,0);
    deficitHr.textContent = fmt(deficitPerHr,1);

    const m = calcMaint(BW);
    maint.textContent = fmt(m,1);

    const on = parseFloat(ongoing.value||'0')||0;

    const rInit = m + deficitPerHr + on;
    const rAfter = m + on;
    rateInit.textContent = fmt(rInit,1);
    rateAfter.textContent = fmt(rAfter,1);
  }

  ['input','change'].forEach(evt=>{
    [bw,dehy,ongoing,noDehy].forEach(el=> el.addEventListener(evt, recalcAll));
  });

  recalcAll();
</script>
</body>
</html>

